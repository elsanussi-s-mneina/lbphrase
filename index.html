<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width">
	<title>Libyan Arabic Phrase Book Lesson 1</title>
	<style>
		body {
			font-family: Arial, Helvetica, sans-serif;
		}

		p {
			/* Do not show too many characters on one line: */
			max-width: 40em;
			/* Align text to the center horizontally. */
			text-align: center;
			margin: 0 auto;
		}

		.letterImage {
			width: 1em;
			height: 1em;
			padding-top: 0.6em;
			padding-right: 0.4em;
			padding-bottom: -0.2em;
		}

		.plainbutton {
			font-size: 3em;
			margin: 0.4em;
			padding: 0.2em;
			border-radius: 0.3em;
			background-color: whitesmoke;
			border-color: gray;
			border-width: 0.12em;
		}

		@keyframes highlightOn {
			0% {
				background-color: #3f51b5;
				border-width: 0.32em;
			}
			50% {
				border-width: 0.1em;

				background-color: white;
				rotate: -6deg;
				margin-right: 0.2em;
				font-size: 4em;
				padding: 0.2em;
			}
			100% {
				background-color: #3f51b5;
				border-width: 0.32em;
			}
		}

		
		/* To highlight a button as wrong,
		 * the button will become red
		 * while rotating left and right
		 * in a motion similar to shaking
		 * one's finger when saying no
		 */
		@keyframes highlightWrong {
			0% {
				background-color: #3f51b5;
				border-width: 0.32em;
			}
			25% {
				border-width: 0.1em;

				background-color: red;
				rotate: 6deg;
				margin-right: 0.2em;
				font-size: 4em;
				padding: 0.2em;
			}
			50% {
				border-width: 0.1em;

				background-color: white;
				rotate: -6deg;
				margin-right: 0.2em;
				font-size: 4em;
				padding: 0.2em;
			}
			75% {
				border-width: 0.1em;

				background-color: red;
				rotate: 6deg;
				margin-right: 0.2em;
				font-size: 4em;
				padding: 0.2em;
			}
			100% {
				background-color: #3f51b5;
				border-width: 0.32em;
			}
		}

		@keyframes highlightCorrect {
			0% {
				background-color: #3f51b5;
				border-width: 0.32em;
			}
			25% {
				border-width: 0.1em;

				background-color: white;
				font-size: 4em;

			}
			50% {
				border-width: 0.1em;

				
				background-color: white;
				font-size: 4em;
				box-shadow: -18px 18px green;
			}
			75% {
				border-width: 0.1em;

				background-color: white;
				font-size: 4em;
				padding: 0.2em;
			}
			100% {
				background-color: hsl(231, 48%, 48%);
				border-width: 0.32em;
			}
		}

		

		.highlighted {
			border-color: blue;
			animation-duration: 1s;
			animation-name: highlightOn;
			animation-iteration-count: 1;
			animation-direction: alternate;
		}


		.highlightedAsWrong {
			border-color: blue;
			animation-duration: 1s;
			animation-name: highlightWrong;
			animation-iteration-count: 1;
			animation-direction: alternate;
		}

		.highlightedAsCorrect {
			border-color: blue;
			animation-duration: 1s;
			animation-name: highlightCorrect;
			animation-iteration-count: 1;
			animation-direction: alternate;
		}


		button
		{	
			font-family: inherit;
			font-size: 32pt;
			margin: 0.3em;
			padding: 0.6em;
			border-radius: 0.9em;
			border-top-left-radius: 1.0em;
			border-top-right-radius: 0.0em;
			background-color: #3f51b5;
			border-color: gray;
			border-width: 0.32em;
		}


		/* Round the text area, where the line ends. In a right to left language
		 this border rounding is at the top-left */
		textarea {
			font-size: 3em;

			/* Dear future programmer,
			  Switch the values of border-top-left-radius
			  and border-top-right-radius when modifying this
			  code to write text for a language that flows in a different direction.
			*/
			border-top-left-radius: 1.0em;
			border-top-right-radius: 0.0em;

			top: 0px;
			height: 33vh
		}

		h2 {
			margin-top: 1.5em;
			margin-bottom: 0.0em;
			text-align: center;
		}

		.primaryMessage {
			font-size: 20px;
			text-align: center;	
		}
		
		.quizToggleOff {
			font-size: 32pt;
			margin: 0.3em;
			padding: 0.6em;
			border-radius: 0.9em;
			border-top-right-radius: 1.0em;
			border-top-left-radius: 0.0em;
			background-color: white;
			border-color: gray;
			border-width: 0.32em;			
		}

		.quizToggleOn {
			font-size: 32pt;
			margin: 0.3em;
			padding: 0.6em;
			border-radius: 0.9em;
			border-top-right-radius: 1.0em;
			border-top-left-radius: 0.0em;
			background-color: gray;
			border-color: gray;
			border-width: 0.32em;
		}

		.playSoundAgainButton {
			border-radius: 0.1em;
			border-color: yellow;
			box-shadow: inset;
		}

		
		/* Some classes for style, for those programmers who want
		a more specific style:
		.punctuation {}
		.alphabet {}
		.whitespace {}
		.combinations {}
		.finals {}
		*/

		/* Resume styles */
		.resume {
			border: blue 10px 2px;
		}

		.time {
			text-align: right;
		}
		
		.place {
			text-align: left;
		}

	</style>

</head>

<body>
	<div id="root"></div>
	<!-- The tag with the ID equal to root will be where the application's buttons, and other user interface elemnts will appear. -->
	<script>
		let appState = { 
			quizMode: false, // whether there is a quiz running.
			currentQuizPromptAudioId: null, // what the correct answer is (ID of the audio)
			mostRecentlyTyped: "",
			correctCount: 0,
			incorrectCount: 0,
			quizStatisticsRaw: [],
			quizStatistics: [],
			showingCursive: false,
			showingPrinted: true,
		};
		
		var aboutThisApplication = "This is for causing the computer to speak out Libyan Arabic phrases. Make sure your sound is on. Information about the software developer is available at the following web address: https://www.github.com/elsanussi-s-mneina";

		// A variable that defines the alphabet.
		// Each character is defined as the 
		// text that it will write in the text box,
		// the buttonLabel which is the text that is written on the button
		// and the description, which is what a screenreader would describe
		// the button as.
		// Note to self we are missing the audio for vet, kaf, kaf sofit, peh and sin. We have the audio for bet, khaf, khaf sofit, feh, and shin.
		// That is why there are some missing buttons.
		var alphabet = [
		{ text: "khair", buttonLabel: "khair", shortButtonLabel: "khair", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 2000, audioLengthInMilliseconds: 1000, isClippedAudio: true, audioId: "khairLibyanArabic", buttonId: "khairLibyanArabicButton", cursivePicture: null},
			{ text: "kayf 7aalak", buttonLabel: "kayf 7aalak", shortButtonLabel: "kayf 7aalak", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 12000, audioLengthInMilliseconds: 3000, isClippedAudio: true, audioId: "kayfLibyanArabic", buttonId: "kayfLibyanArabicButton", cursivePicture: null},
			{ text: "kayf 7aalik", buttonLabel: "kayf 7aalik", shortButtonLabel: "kayf 7aalik", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 28000, audioLengthInMilliseconds: 2000, isClippedAudio: true, audioId: "kayf2LibyanArabic", buttonId: "kayf2LibyanArabicButton", cursivePicture: null},
			{ text: "kwayyis", buttonLabel: "kwayyis", shortButtonLabel: "kwayyis", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 39500, audioLengthInMilliseconds: 2000, isClippedAudio: true, audioId: "kwayyisLibyanArabic", buttonId: "kwayyisLibyanArabicButton", cursivePicture: null},
			{ text: "kwayysa", buttonLabel: "kwayysa", shortButtonLabel: "kwayysa", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 50500, audioLengthInMilliseconds: 2000, isClippedAudio: true, audioId: "kwayysaLibyanArabic", buttonId: "kwayysaLibyanArabicButton", cursivePicture: null},
			{ text: "shijjaw", buttonLabel: "shijjaw", shortButtonLabel: "shijjaw", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 67500, audioLengthInMilliseconds: 2000, isClippedAudio: true, audioId: "shijjawLibyanArabic", buttonId: "shijjawLibyanArabicButton", cursivePicture: null},
			{ text: "ma3assalama", buttonLabel: "ma3assalama", shortButtonLabel: "ma3assalama", description: "Libyan Arabic phrases", oggAudioFile: "audio/Libyan_Arabic_conversation_1.ogg", mp3AudioFile: "audio/Libyan_Arabic_conversation_1.mp3", startTimeInMilliseconds: 60000 + 23000 + 700, audioLengthInMilliseconds: 2000, isClippedAudio: true, audioId: "ma3assalamaLibyanArabic", buttonId: "ma3assalamaLibyanArabicButton", cursivePicture: null},

	];
				

		let futureSampleQuizStatisticsElement = {perLetter: [{audioId: "tavAudio", correctCount: 4, incorrectCount: 7, totalTimesAsked: 2, confusedWith: [{audioId: "lamedAudio", numberOfTimes: 2}]}]};
		let sampleQuizStatisticsElement = {correctResponseCount: 0, askCount: 0};

		// The variable audioStopTimeout allows us to clear any time outs
		// that are running before playing new audio.
		// This is so that playback will not get interrupted if
		// user clicks to play a new audio before an old one finished
		let audioStopTimeout = null;
		let buttonAnimationStopTimeoutId = null;

		// prevent animation stuttering:
		let previousButtonToSpeak = null;


		function audioIdHasAudioToPlay(audioId) {
			var audioElement = document.getElementById(audioId);
			return audioElement.readyState >= 2; // has enough audio to play
		}
		
		// dispatch actions:
		// These determine what state changes are possible
		// on the appication state.
		const ASK_NEXT_QUESTION = "askNextQuestion";
		const ASK_NEXT_QUESTION_AFTER_DELAY = "askNextQuestionAfterDelay";
		const TOGGLE_QUIZ = "toggleQuiz";
		const SELECT_LETTER = "selectLetter";
		const SHOW_ABOUT_THE_PROGRAMMER = "aboutTheProgrammer";

		// The following function returns a new appState.
		// and a list of actions
		function reducer(dispatchPayload, draftAppState)
		{
			console.log(dispatchPayload);
			console.log(draftAppState);
			if (dispatchPayload.action === ASK_NEXT_QUESTION) {
				askNextQuestion();	
			} else if (dispatchPayload.action === ASK_NEXT_QUESTION_AFTER_DELAY) {
				console.log("Asking next question after delay");
				setTimeout(askNextQuestion, 2000);
			} else if (dispatchPayload.action === TOGGLE_QUIZ) {
				onClickToggleQuiz();
			} else if (dispatchPayload.action === SELECT_LETTER) {
			} else if (dispatchPayload.action === SHOW_ABOUT_THE_PROGRAMMER) {
				let resumeRoot = document.getElementById("resumeTargetPanel");
				resumeRoot.appendChild(createResume());
				let buttonToHide = document.getElementById("aboutProgrammerButton");
				buttonToHide.style.visibility = "collapse";
			} else {
				console.warn("Action not recognized:", dispatchPayload);	
			}
			
			return {appState: draftAppState, actions: []};
		}
		
		// The dispatch payload has the following
		// property action: string
		function dispatchAction(dispatchPayload) {
			let reducerResult = reducer(dispatchPayload, appState);
			appState = reducerResult.appState;
		}


		function getInfoFromAudioId(targetAudioId)
		{
			let alphabetFiltered = alphabet.filter(x => x.audioId == targetAudioId);
			if (alphabetFiltered.length > 0)
			{
				return alphabetFiltered[0];
			}

			return null;
		}

		function getTextFromAudioId(targetAudioId)
		{
			let alphabetFiltered = alphabet.filter(x => x.audioId == targetAudioId);
			if (alphabetFiltered.length > 0)
			{
				return alphabetFiltered[0].shortButtonLabel;
			}

			return null;
		}
		
		function askNextQuestion() {
			console.log("Asking question...");
			
			let audioIdToPlay = chooseRandomAudioIdOfLetter();
			appState.currentQuizPromptAudioId = audioIdToPlay;
			appState.currentQuizPromptTargetText = getTextFromAudioId(audioIdToPlay);

			playSoundOfAudioId(audioIdToPlay);

			console.log("Played audio of:", audioIdToPlay);
			console.log("quiz Statistics:", appState.quizStatistics);
			appState.quizStatistics[0].perLetter[audioIdToPlay].askCount++;

			
			let audioButtonToSpeak = document.getElementById("playSoundAgainButton");
			audioButtonToSpeak.className = "highlighted playSoundAgainButton";
			// Turn off highlight after animation completes:
			setTimeout(function() {audioButtonToSpeak.className = "playSoundAgainButton";}, 2400);
		}
		
		function playSoundOfCurrentQuestion() {
			
			playSoundOfAudioId(appState.currentQuizPromptAudioId);
			console.log("Played audio of:", appState.currentQuizPromptAudioId);

			let audioButtonToSpeak = document.getElementById("playSoundAgainButton");
			audioButtonToSpeak.className = "highlighted playSoundAgainButton";
			// Turn off highlight after animation completes:
			setTimeout(function() {audioButtonToSpeak.className = "playSoundAgainButton";}, 2400);
		}

		function getShortButtonLabelByAudioId(audioIdWanted, fallbackValue) {
			let matches = alphabet.filter(x => x.audioId == audioIdWanted);
			if (matches.length > 0) {
				return matches[0].shortButtonLabel;
			} else {
				return fallbackValue;
			}
		}

		function resetAnimationOfPreviousButton()
		{
			clearTimeout(buttonAnimationStopTimeoutId);
			if (previousButtonToSpeak !== null && previousButtonToSpeak !== undefined && previousButtonToSpeak.className !== "")
			{
				previousButtonToSpeak.className = "";
			}
		}

		// This function returns a function that speaks
		// audio
		function onClickButtonForSpeaking(audioIdToSpeak, sourceButtonId) {
			function enclosedFunction() {

				appState.mostRecentlyTyped += getShortButtonLabelByAudioId(audioIdToSpeak, "");
				console.log("most recently typed", appState.mostRecentlyTyped);
				if (appState.mostRecentlyTyped.endsWith("\u05D0\u05DC\u05E1\u05E0\u05D5\u05E1\u05D9")) {
					console.log("unlock");
					setMainMessage("Programmed by Elsanussi Mneina");
					root.appendChild(createResume());
				}
				if (appState.quizMode) {
					if (audioIdToSpeak === appState.currentQuizPromptAudioId) {
						console.log("Correct");
						setMainMessage("Your choice was correct.");
						appState.correctCount += 1;
						let buttonToSpeak = document.getElementById(sourceButtonId);

						// Set play sound again to show same character
						let playSoundAgainButton = document.getElementById("playSoundAgainButton");
						if (appState.currentQuizPromptAudioId)
						{
							playSoundAgainButton.innerText = appState.currentQuizPromptTargetText;
							setTimeout(function() {playSoundAgainButton.innerText = "?";}, 1000);
						}
						appState.quizStatisticsRaw[0].perLetter.push({audioId: appState.currentQuizPromptAudioId, correct: true});
						appState.quizStatistics[0].perLetter[appState.currentQuizPromptAudioId].correctResponseCount++;

						resetAnimationOfPreviousButton();
						buttonToSpeak.className = "highlightedAsCorrect";
						previousButtonToSpeak = buttonToSpeak;

						dispatchAction({action: ASK_NEXT_QUESTION_AFTER_DELAY});
						// Turn off highlight after animation completes:
						buttonAnimationStopTimeoutId = setTimeout(function() {buttonToSpeak.className = "";}, 2400);
					} else {
						console.log("Incorrect");
						setMainMessage("Your choice was not correct!");
						appState.incorrectCount += 1;
						appState.quizStatisticsRaw[0].perLetter.push({audioId: appState.currentQuizPromptAudioId, correct: false, confusedWith: audioIdToSpeak});
						appState.quizStatistics[0].perLetter[appState.currentQuizPromptAudioId].incorrectResponseCount++;
						resetAnimationOfPreviousButton();
						let buttonToSpeak = document.getElementById(sourceButtonId);
						previousButtonToSpeak = buttonToSpeak;
						buttonToSpeak.className = "highlightedAsWrong";
						// Turn off highlight after animation completes:
						buttonAnimationStopTimeoutId = setTimeout(function() {buttonToSpeak.className = "";}, 2400);
					}

				} else {
					playSoundOfAudioId(audioIdToSpeak);

					resetAnimationOfPreviousButton();
					var buttonToSpeak = document.getElementById(sourceButtonId);
					previousButtonToSpeak = buttonToSpeak;
					buttonToSpeak.className = "highlighted";
					
					// Turn off highlight after animation completes:
					buttonAnimationStopTimeoutId = setTimeout(function() {buttonToSpeak.className = "";}, 2400);
				}

			}
			return enclosedFunction;
		}

		// The following function is copied from devdocs.io (documentation website)
		function getRandomInt(min, max) {
		  min = Math.ceil(min);
		  max = Math.floor(max);
		  return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
		}


		
		function chooseRandomAudioIdOfLetter() {
			let randomIndex = getRandomInt(0, alphabet.length);
			return alphabet[randomIndex].audioId;
		}

		function createButtonForSpeaking(letter) {
			return createImageButtonForSpeaking(letter.text, letter.shortButtonLabel, letter.description, letter.audioId, letter.buttonId, letter.cursivePicture);
		}

		function createLabelledButtonForSpeaking(textToWrite, buttonLabel, description, audioId, buttonId) {
			var aButton = document.createElement("button");
			aButton.id = buttonId;
			var textNode = document.createTextNode(buttonLabel);
			aButton.appendChild(textNode);
			aButton.ariaLabel = description;
			aButton.addEventListener("click", onClickButtonForSpeaking(audioId, buttonId));
			return aButton;
		}

		function createImageButtonForSpeaking(textToWrite, buttonLabel, description, audioId, buttonId, imageSource) {
			var aButton = document.createElement("button");
			aButton.id = buttonId;

			let printSpan = document.createElement("span");
			printSpan.className = "letterPrint"
			let textNode = document.createTextNode(buttonLabel);
			printSpan.appendChild(textNode);
			let imageElement = document.createElement("img");
			imageElement.src = imageSource;
			imageElement.className = "letterImage";
			if (!appState.showingCursive)
			{
				imageElement.setAttribute("style", "visibility: collapse; display: none");
			}

			let buttonInnerContainer = document.createElement("div");
			buttonInnerContainer.appendChild(printSpan);
			buttonInnerContainer.appendChild(imageElement);
			
			aButton.appendChild(buttonInnerContainer);
			aButton.ariaLabel = description;
			aButton.addEventListener("click", onClickButtonForSpeaking(audioId, buttonId));
			return aButton;
		}


		function populateQuizStatisticsForStartOfQuiz() {
			let result = {};
			for (let i = 0; i < alphabet.length; i++) {
				const currentAudioId = alphabet[i].audioId;
				result[currentAudioId] = {correctResponseCount: 0, incorrectResponseCount: 0, askCount: 0};
			}
			return result;
		}

		function hideAllVisibleLetterImages() {
			let letterImageElements = document.getElementsByClassName("letterImage");
			for (let i = 0; i < letterImageElements.length; i++) {
				letterImageElements[i].setAttribute("style", "visibility: collapse; display: none;");
			}
		}

		function showAllLetterImages() {
			let letterImageElements = document.getElementsByClassName("letterImage");
			for (let i = 0; i < letterImageElements.length; i++) {
				letterImageElements[i].setAttribute("style", "visibility: visible");
			}
		}

		function onToggleShowCursiveCheckbox(theEvent) {
			if (appState.showingCursive) {
				hideAllVisibleLetterImages();
			} else {
				showAllLetterImages();
			}
			appState.showingCursive = !appState.showingCursive;
		}

		function hideAllVisibleLetterPrintedForms() {
			let letterPrintedElements = document.getElementsByClassName("letterPrint");
			for (let i = 0; i < letterPrintedElements.length; i++) {
				letterPrintedElements[i].setAttribute("style", "visibility: collapse; display: none;");
			}
		}

		function showAllLetterPrintedForms() {
			let letterPrintedElements = document.getElementsByClassName("letterPrint");
			for (let i = 0; i < letterPrintedElements.length; i++) {
				letterPrintedElements[i].setAttribute("style", "visibility: visible");
			}
		}


		function onToggleLetterForms(theEvent) {
			toggleLetterFormButton = document.getElementById("toggleLetterFormButton");
			
			if (appState.showingPrinted && !appState.showingCursive) {
				appState.showingCursive = true;
				appState.showingPrinted = false;
			} else if (!appState.showingPrinted && appState.showingCursive) {
				appState.showingCursive = true;
				appState.showingPrinted = true;
			} else {
				appState.showingCursive = false;
				appState.showingPrinted = true;
			}	

			if (appState.showingPrinted) {
				showAllLetterPrintedForms();
			} else {
				hideAllVisibleLetterPrintedForms();
			}

			if (appState.showingCursive) {
				showAllLetterImages();
			} else {
				hideAllVisibleLetterImages();
			}

			toggleLetterFormButton.innerText = toggleFormButtonInnerText();
		}

		function toggleFormButtonInnerText() {
			let buttonText = "";
			if (appState.showingPrinted && !appState.showingCursive) {
				buttonText = "Showing Printed Forms";
			} else if (!appState.showingPrinted && appState.showingCursive) {
				buttonText = "Showing Cursive Forms";
			} else {
				buttonText = "Showing Cursive and Printed Forms";
			}	
			return buttonText;
		}

		function createLetterFormToggle() {
			let togglePanel = document.createElement("span");
			togglePanel.dir = "ltr";
			let button = document.createElement("button");
			button.id = "toggleLetterFormButton";

			let buttonText = toggleFormButtonInnerText();
			button.appendChild(document.createTextNode(buttonText));

			button.addEventListener("click", onToggleLetterForms);

			togglePanel.appendChild(button);
			return togglePanel;
		}


		function onQuizModeChange() {
			if (appState.quizMode === true) {
				setMainMessage("Quiz started, listen for audio");
				hideAllVisibleLetterImages();
				appState.quizStatistics.push({perLetter: populateQuizStatisticsForStartOfQuiz()});
				appState.quizStatisticsRaw.push({perLetter: []});
				console.log("App State:");
				console.log(appState);
				askNextQuestion();
				document.getElementById("toggleQuizButton").className = "quizToggleOn";
			} else {
				showAllLetterImages();
				setMainMessage("You chose " + appState.correctCount + " time(s) correctly, and " + appState.incorrectCount + " time(s) incorrectly in the previous quiz.");	
				document.getElementById("toggleQuizButton").className = "quizToggleOff";
			}
		}
		
		function onClickToggleQuiz() {
			let quizButton = document.getElementById("toggleQuizButton");
			if (appState.quizMode === false) {
				quizButton.innerText = "Stop Quiz";
				quizButton.ariaLabel = "Button to Stop Quiz";
				playSoundAgainButton.style.display = "block";
			} else {
				quizButton.innerText = "Start Quiz";
				quizButton.ariaLabel = "Button to Start Quiz";		
				playSoundAgainButton.style.display = "none";
			}
			appState.quizMode = !appState.quizMode;
			onQuizModeChange();
		}
		
		function createToggleQuizButton() {
			let quizButton = document.createElement("button");
			quizButton.dir = "ltr";
			quizButton.id = "toggleQuizButton";
			quizButton.className = "quizToggleOff";
			let quizText = "Start Quiz";
			let textNode = document.createTextNode(quizText);
			quizButton.appendChild(textNode);
			quizButton.ariaLabel = "Button to Start Quiz";
			quizButton.addEventListener("click", function() {dispatchAction({action: TOGGLE_QUIZ})});
			return quizButton;
		}

		function createAboutTheComputerProgrammerButton() {
			let aboutButton = document.createElement("button");
			aboutButton.dir = "ltr";
			aboutButton.id = "aboutProgrammerButton";
			aboutButton.className = "aboutProgrammerButton";
			let aboutButtonText = "Who programmed this?";
			let textNode = document.createTextNode(aboutButtonText);
			aboutButton.appendChild(textNode);
			aboutButton.ariaLabel = "Button to Show Programmer Resume/CV";
			aboutButton.addEventListener("click", function() {dispatchAction({action: SHOW_ABOUT_THE_PROGRAMMER})});
			return aboutButton;
		}


		function onClickPlaySoundAgain() {
			if (appState.quizMode === true) {
				playSoundOfCurrentQuestion();
			}
		}

		function createPlaySoundAgainButton() {
			let playSoundAgainButton = document.createElement("button");
			playSoundAgainButton.id = "playSoundAgainButton";
			playSoundAgainButton.className = "playSoundAgainButton";
			let quizText = "?";
			let textNode = document.createTextNode(quizText);
			playSoundAgainButton.appendChild(textNode);
			playSoundAgainButton.ariaLabel = "Button to Play sound of question again";
			playSoundAgainButton.addEventListener("click", onClickPlaySoundAgain);

			// The play sound again button should start off as hidden.
			// It only is useful when a quiz is running.
			playSoundAgainButton.style.display = "none";
			return playSoundAgainButton;
			
		}
		
		
		// Create a heading of a particular level.
		// This first argument is a number such as "1", "2", all the way to "6".
		// The second argument is the text to show in the heading.
		function createHeading(level, textToShow) {
			var element = document.createElement("h" + level);
			var textNode = document.createTextNode(textToShow);
			element.appendChild(textNode);
			return element;
		}

		function createHeading_whenLevelIsOne_tagIsH1() {
			let expected = document.createElement("h1");
			let actual = createHeading(1, "hi there");
			
			if (actual.nodeName === "H1") {
				return [true, "."];
			} else {
				return [false, "createHeading function did not return an HTML Tag H1 when level was set to 1."];
			}
		}

		function createHeading_whenLevelIsSix_tagIsH6() {
			let expected = document.createElement("h6");
			let actual = createHeading(6, "hello there");
			
			if (actual.nodeName === "H6") {
				return [true, "."];
			} else {
				return [false, "createHeading function did not return an HTML Tag H6 when level was set to 6."];
			}
		}	

		// You most likely only want to create one audio element per page.
		// If you make more than one the application will not work on
		// Apple's web browser Safari.
		function createAudioElement(id, mp3FilePath, oggFilePath) {
			// Creating HTML similar to the following
			// code from https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_audio_play
			// accessed at Wednesday, April 13, 2022.
			// <audio id="myAudio">
			//	 <source src="horse.ogg" type="audio/ogg">
			//	 <source src="horse.mp3" type="audio/mpeg">
			//	 Your browser does not support the audio element.
			// </audio>


			var audioElement = document.createElement("audio");
			audioElement.id = "theAudioElement";

			if (oggFilePath) {
				var oggSourceElement = document.createElement("source");
				oggSourceElement.src = oggFilePath;
				oggSourceElement.type = "audio/ogg";
				audioElement.appendChild(oggSourceElement);
			}

			if (mp3FilePath) {
				var mp3SourceElement = document.createElement("source");
				mp3SourceElement.src = mp3FilePath;
				mp3SourceElement.type = "audio/mpeg"; 
				audioElement.appendChild(mp3SourceElement);
			}
			var noSupportMessage = document.createTextNode("Cannot play audio because your browser does not support the audio element.");
			audioElement.appendChild(noSupportMessage)
			return audioElement;
		}


		function playSoundOfFile(filename) {
			let audioElement = document.getElementById("theAudioElement");
			clearTimeout(audioStopTimeout);
			audioElement.src = filename;
			audioElement.play();
		}

		function playPartOfSoundOfFile(filename, currentTime, audioLengthInMilliseconds) {
			let audioElement = document.getElementById("theAudioElement");
			clearTimeout(audioStopTimeout);
			audioElement.src = filename;
			audioElement.currentTime = currentTime / 1000;
			audioElement.load();
			audioElement.play();
			audioStopTimeout = setTimeout(function() { audioElement.pause()}, audioLengthInMilliseconds);
		}

		function getAudioFileNameFromAudioId(audioId) {
			let audioInfo = getInfoFromAudioId(audioId);
			if (audioInfo != null)
			{
				return audioInfo.mp3AudioFile;
			}
			else 
			{
				console.log("could not find audio at", audioId);
				return "";
			}
			return audioInfo.mp3AudioFile;
		}

		function playSoundOfAudioId(audioId) {
			let audioInfo = getInfoFromAudioId(audioId);
			let filename = getAudioFileNameFromAudioId(audioId);
			if (audioInfo.isClippedAudio == true, audioInfo.audioLengthInMilliseconds !== undefined)
			{
				
				playPartOfSoundOfFile(filename, audioInfo.startTimeInMilliseconds, audioInfo.audioLengthInMilliseconds);
			}
			else
			{
				playSoundOfFile(filename);
			}
		}

		function attachAudioElements(idOfRootElement) {
			// We only attach one audio element, because Safari does not make use of more than one.
			var audioSectionDiv = document.createElement("div");
			if (alphabet.length > 0) {
				audioSectionDiv.appendChild(createAudioElement(alphabet[0].audioId, alphabet[0].mp3AudioFile, alphabet[0].oggAudioFile))
			}
			root.appendChild(audioSectionDiv);
		}
		
		function createMainMessageLabel() {
			let mainMessageLabel = document.createElement("div");
			mainMessageLabel.id = "mainMessageLabel";
			mainMessageLabel.className = "primaryMessage";
			let mainMessageLabelText = document.createTextNode("Welcome!");
			mainMessageLabel.dir = "ltr";
			mainMessageLabel.appendChild(mainMessageLabelText);
			return mainMessageLabel;
		}
		
		function setMainMessage(newerText) {
			document.getElementById("mainMessageLabel");
			mainMessageLabel.dir = "ltr"; // set text direction
			mainMessageLabel.innerText = newerText;
		}
		
		function attachButtonsForSpeaking(idOfRootElement) {
			var root = document.getElementById(idOfRootElement);

			root.dir = "rtl";

			var alphabetDiv = document.createElement("div");
			alphabetDiv.className = "alphabet";
			root.appendChild(createHeading(2, "Libyan Arabic Phrase book - Lesson 1: Play Audio of Letter Names"))

			root.appendChild(createParagraph(aboutThisApplication));

			let controlPanel = document.createElement("p");
			controlPanel.className = "controlPanel";

			controlPanel.appendChild(createToggleQuizButton());
			controlPanel.appendChild(createLetterFormToggle());
			root.appendChild(controlPanel)
			root.appendChild(createPlaySoundAgainButton());
			root.appendChild(createMainMessageLabel());
			for (var i = 0; i < alphabet.length; i++) {
				alphabetDiv.appendChild(createButtonForSpeaking(alphabet[i]));
			}
			root.appendChild(alphabetDiv);
		}

		// Create heading for the whole
		// application.
		function createAppHeading() {
			var heading1 = createHeading("1", "Libyan Arabic Phrases");
			return heading1;
		}

		function createParagraph(someText) {
			var paragraph = document.createElement("p");
			paragraph.dir = "ltr";
			var textElement = document.createTextNode(someText);
			paragraph.appendChild(textElement);
			return paragraph;
		}

		// For the place where one worked on a resume.
		function createPlaceParagraph(someText) {
			var paragraph = document.createElement("p");
			paragraph.dir = "ltr";
			paragraph.className = "place";
			var textElement = document.createTextNode(someText);
			paragraph.appendChild(textElement);
			return paragraph;
		}

		// For the time period when one worked on a resume.
		function createTimeParagraph(someText) {
			var paragraph = document.createElement("p");
			paragraph.dir = "ltr";
			paragraph.className = "time";
			var textElement = document.createTextNode(someText);
			paragraph.appendChild(textElement);
			return paragraph;
		}

		function createListItem(text) {
			let listItem = document.createElement("li");
			let textNode = document.createTextNode(text);
			listItem.appendChild(textNode);
			return listItem;
		}

		function createUnorderedListFromList(texts) {
			let unorderedList = document.createElement("ul");
			for (let i = 0; i < texts.length; i++) {
				let listItem = createListItem(texts[i]);
				unorderedList.appendChild(listItem);
			}
			return unorderedList;
		}

		// Create a resume for the software developer
		// of this web application.
		function createResume() {
			let resumeRoot = document.createElement("div");
			resumeRoot.dir = "ltr";
			let nameHeading = createHeading(1, "Elsanussi S. Mneina");
			resumeRoot.appendChild(nameHeading);
			resumeRoot.className = "resume";
			let contactInfo = createParagraph("elsa" + "nussi@" + "outlook.com, +1" + "204-292-1033, " + "linkedin.com/in/elsanussi-s-mneina");
			resumeRoot.appendChild(contactInfo);
			let shortSummaryHeading = createHeading(4, "Summary");
			resumeRoot.appendChild(shortSummaryHeading);
			let shortSummaryParagraph = createParagraph("A graduate of the University of Manitoba with a Bachelors degree in Computer Science (2011) and a Bachelors degree in Arts (with a major in Linguistics, 2017).");
			resumeRoot.appendChild(shortSummaryParagraph);

			let employmentHeading = createHeading(2, "Employment");
			resumeRoot.appendChild(employmentHeading);
			let employment1 = createHeading(3, "Junior Web Developer");
			resumeRoot.appendChild(employment1);
			let employment1Subheading = createPlaceParagraph("BIT Space Development (Winnipeg)");
			resumeRoot.appendChild(employment1Subheading);
			let employment1Subheading2 = createTimeParagraph("May 2022" + "\u2014" + "Present");
			resumeRoot.appendChild(employment1Subheading2);
			let employment1List = createUnorderedListFromList(["Create Web APIs for creating, reading, updating, and deleting records in a relational database", "Set up unit tests for testing Web API logic using xUnit"]);
			
			resumeRoot.appendChild(employment1List);

			let employment2 = createHeading(3, "Traffic Control Person");
			resumeRoot.appendChild(employment2);
			let employment2Subheading = createPlaceParagraph("Roads and Works Department, Town of Oakville (Ontario)");
			resumeRoot.appendChild(employment2Subheading);
			let employment2Subheading2 = createTimeParagraph("September" + "\u2014" + "October 2019");
			resumeRoot.appendChild(employment2Subheading2);
			let employment2List = createUnorderedListFromList(["Coordinated traffic with team mate to allow construction work on roads to occur safely."]);
			resumeRoot.appendChild(employment2List);

			let employment3 = createHeading(3, "Research Coordinator");
			resumeRoot.appendChild(employment3);
			let employment3Subheading = createPlaceParagraph("Red River College (Winnipeg)");
			resumeRoot.appendChild(employment3Subheading);
			let employment3Subheading2 = createTimeParagraph("March 2018" + "\u2014" + "February 2019");
			resumeRoot.appendChild(employment3Subheading2);

			let rrcTasks =
			["Developed software using Python for research purposes, and stored source code in Git server.",
			"Presented at the High Performance Computing Conference in front of hundreds."
			];
			let rrcTasksElement = createUnorderedListFromList(rrcTasks);
			resumeRoot.appendChild(rrcTasksElement);

			let employment4 = createHeading(3, "Software Specialist 1");
			resumeRoot.appendChild(employment4);
			let employment4Subheading = createPlaceParagraph("Manitoba Telecom Systems (Winnipeg)");
			resumeRoot.appendChild(employment4Subheading);
			let employment4Subheading2 = createTimeParagraph("May 2012" + "\u2014" + "October 2014");
			resumeRoot.appendChild(employment4Subheading2);
			let telecomTasks = [
			"Rewrote .NET Framework project and improved throughput",
			"Developed web application for managing TV channel listings using C#, NHibernate, ASP.NET, HTML, (also MXML) Javascript, and WCF.",
			"Wrote database scripts to create and populate tables using SQL Server, and to get statistics on usage of newly launched features."
			];
			let telecomTasksElement = createUnorderedListFromList(telecomTasks);
			resumeRoot.appendChild(telecomTasksElement);



			let employment5 = createHeading(3, "Grader-Marker for Programming for Scientists and Engineers Course");
			resumeRoot.appendChild(employment5);
			let employment5Subheading = createPlaceParagraph("Mr. Terry Andres, University of Manitoba");
			resumeRoot.appendChild(employment5Subheading);
			let employment5Subheading2 = createTimeParagraph("September 2011" + "\u2014" + "January 2012");
			resumeRoot.appendChild(employment5Subheading2);

			let sciAndEngTasks = ["Marked programming assignments in Python"];
			let sciAndEngTasksElement = createUnorderedListFromList(sciAndEngTasks);
			resumeRoot.appendChild(sciAndEngTasksElement);

			let employment6 = createHeading(3, "Grader-Marker for Data Structures and Algorithms Course");
			resumeRoot.appendChild(employment6);
			let employment6Subheading = createPlaceParagraph("Dr. Stephane Durocher, University of Manitoba");
			resumeRoot.appendChild(employment6Subheading);
			let employment6Subheading2 = createTimeParagraph("September" + "\u2014" + "December 2010");
			resumeRoot.appendChild(employment6Subheading2);
			let javaTasks = ["Graded programming assignments in Java"];
			let javaTasksElement = createUnorderedListFromList(javaTasks);
			resumeRoot.appendChild(javaTasksElement);

			let employment7 = createHeading(3, "Language Consultant/Teaching Assistant");
			resumeRoot.appendChild(employment7);
			let employment7Subheading = createPlaceParagraph("Dr. Lorna Macdonald, University of Manitoba");
			resumeRoot.appendChild(employment7Subheading);
			let employment7Subheading2 = createTimeParagraph("Autumn 2009" + "\u2014" + "Winter 2010");
			resumeRoot.appendChild(employment7Subheading2);
			let languageTasks = ["Answered students' questions"];
			let languageTasksElement = createUnorderedListFromList(languageTasks);
			resumeRoot.appendChild(languageTasksElement);



			let employment8 = createHeading(3, "Grader-Marker for Data Structures and Algorithms Course");
			resumeRoot.appendChild(employment8);

			let employment8Subheading = createPlaceParagraph("Alan Marshall, University of Manitoba");
			resumeRoot.appendChild(employment8Subheading);
			let employment8Subheading2 = createTimeParagraph("September" + "\u2014" + "December 2009");
			resumeRoot.appendChild(employment8Subheading2);
			let graderMarker1Tasks = ["â€£ Marked approximately 250 assignment submissions written in Java"];
			let graderMarker1TasksElement = createUnorderedListFromList(graderMarker1Tasks);
			resumeRoot.appendChild(graderMarker1TasksElement);



			let educationHeading = createHeading(2, "Education");
			resumeRoot.appendChild(educationHeading);
			let education1 = createHeading(3, "Bachelor of Arts (Advanced)" + "\u2014" + "Major: Linguistics, Minor: Latin");
			resumeRoot.appendChild(education1);
			let education1Subheading = createPlaceParagraph("University of Manitoba");
			resumeRoot.appendChild(education1Subheading);
			let education1Subheading2 = createTimeParagraph("September 2014" + "\u2014" + "May 2017");
			resumeRoot.appendChild(education1Subheading2);


			let education2 = createHeading(3, "Bachelor of Science" + "\u2014" + "Major: Computer Science");
			resumeRoot.appendChild(education2);
			let education2Subheading = createPlaceParagraph("University of Manitoba");
			resumeRoot.appendChild(education2Subheading);
			let education2Subheading2 = createTimeParagraph("September 2006" + "\u2014" + "June 2011");
			resumeRoot.appendChild(education2Subheading2);
			let overviewHeading = createHeading(2, "Overview");

			return resumeRoot;
		}

		function main() {
			runUnitTests();

			root.appendChild(document.createComment("Start of HTML code generated by Javascript."));
			attachAudioElements("root");
			attachButtonsForSpeaking("root");
			let resumeTargetPanel = document.createElement("div");
			resumeTargetPanel.id = "resumeTargetPanel";
			root.appendChild(resumeTargetPanel);
			root.appendChild(createAboutTheComputerProgrammerButton());


			root.appendChild(document.createComment("End of HTML code generated by Javascript."));
		}


		// a List of unit test functions.
		// Each function returns a tuple of type (boolean, string).
		// Each function has no parameters.
		let unitTests = [createHeading_whenLevelIsOne_tagIsH1, createHeading_whenLevelIsSix_tagIsH6];

		function runUnitTests() {
			let passCount = 0;
			let failCount = 0;
			let message = '';
			for (let i = 0; i < unitTests.length; i += 1) {
				const currentUnitTest = unitTests[i];
				const [didTestPass, messageFromTest] = currentUnitTest();

				message = message + " " + messageFromTest;

				if (didTestPass) {
					passCount += 1;
				} else {
					failCount += 1;
				}
			}
			console.log(message);
			console.log("Number of passed tests:", passCount);
			console.log("Number of failed tests:", failCount);
		}

		main();
	</script>

</body>
<!-- Created by Elsanussi Mneina (m.). You can contact me (Elsanussi Mneina) at elsanussi.m@outlook.com, mentioning this page)
  This single page web application for learning Libyan Arabic phrases with audio was first released to the public on November 27, 2022 on GitHub under an MIT license.
https://github.com/elsanussi-s-mneina/lbphrase

Here is the LICENSE for this web application:
MIT License
Copyright (c) 2022 Elsanussi Mneina
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->

</html>
